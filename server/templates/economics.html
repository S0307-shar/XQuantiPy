<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XQuantiPy - Economics</title>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0/dist/css/select2.min.css" rel="stylesheet" />
    <style>
        body {
            background-color: #111111;
            color: #f2f5fa;
            font-family: Arial, Helvetica, sans-serif;
            margin: 5%;
            font-size: 16px;
        }

        .dropdown {
            position: relative;
            display: inline-block;
            z-index: 2;
        }

        .dropdown-select {
            display: flex;
            align-items: center;
            padding: 5px;
            border: 1px solid #f2f5fa;
            cursor: pointer;
            min-width: 200px;
        }

        .dropdown-options {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }

        .dropdown-option {
            padding: 5px;
            cursor: pointer;
            user-select: none;
            border: 1px solid #111111;
            background-color: #f2f5fa;
            color: #111111;
        }

        .dropdown-option:hover {
            background-color: #eee;
        }

        .chart {
            z-index: 0;
        }

        input {
            padding: 5px;
            color: #f2f5fa;
            background-color: #111111;
            border: 1px solid #f2f5fa;
            min-width: 200px;
            font-size: 16px;
        }

        input::placeholder {
            color: #f2f5fa;
            font-size: 16px;
        }

        button {
            min-width: 80px;
            background-color: #f2f5fa;
            color: #111111;
            appearance: none;
            font-size: 16px;
            border: 1px solid #111111;
        }


        
    </style>

</head>


<body>
<h1>XQuantiPy - <span id="tickerName", type="text">{{country}}</span></h1>
<div>
    <label for="countryDropdown">Select Countries:</label>
    <div class="dropdown" id="countryDropdown">
        <div class="dropdown-select" onclick="toggleDropdown()">
            <span id="country_symbol">Country</span>
        </div>
        <div class="dropdown-options">
            <div class="dropdown-option" onclick="toggleOption('USA')">United States of America</div>
            <div class="dropdown-option" onclick="toggleOption('CHN')">China</div>
            <div class="dropdown-option" onclick="toggleOption('JPN')">Japan</div>
            <div class="dropdown-option" onclick="toggleOption('DEU')">Germany</div>
            <div class="dropdown-option" onclick="toggleOption('IND')">India</div>
            <div class="dropdown-option" onclick="toggleOption('GBR')">United Kingdom</div>
        </div>
    </div>
    <br>
    <label for="country_period">Period:</label>
    <input type="text" id="country_period" name="country_period" placeholder="10Y or 20Y">
    <br>
    <!-- <label for="indicator">Indicator:</label>
    <input type="text" id="indicator" name="indicator" placeholder="GDP or CRIME_RATE"> -->

    
    <label for="indicatorDropdown">Select Indicator:</label>
    <div class="dropdown" id="indicatorDropdown" style="z-index: 1;">
        <div class="dropdown-select" onclick="toggleIndicatorDropdown()">
            <span id="indicator_symbol">Indicator</span>
        </div>
        <div class="dropdown-options">
            <div class="dropdown-option" onclick="toggleIndicatorOption('GDP')">Gross Domestic Product</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('CRIME_RATE')">Crime Rate Statistics</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('GDP_GROWTH')">GDP Growth Rate</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('GDP_PER_CAPITA')">GDP Per Capita</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('GNI')">Gross National Income</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('GNI_PER_CAPITA')">GNI Per Capita</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('DEBT_TO_GNI')">Debt to GNI Ratio</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('GNP')">Gross National Product</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('INFLATION')">Inflation Rate (CPI)</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('MANUFACTURING')">Manufacturing Output</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('POPULATION')">Population</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('HEALTHCARE_SPENDING')">Healthcare Spending</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('POVERTY_RATE')">Poverty Rate</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('UNEMPLOYMENT')">Unemployment Rate</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('MILITARY_SPENDING')">Military Spending (Defense Budget)</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('MILITARY_SIZE')">Military Army Size</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('ARABLE_LAND')">Arable Land</div>

            <!-- <div class="dropdown-option" onclick="toggleIndicatorOption('GDP')">GDP</div>
            <div class="dropdown-option" onclick="toggleIndicatorOption('CRIME_RATE')">Crime Rate</div> -->
        </div>
    </div>








    
</div>
<button onclick="submitFilters()">Submit</button>
<div class="chart">
    {{plot}}
</div>
</body>

<script>
    function submitFilters() {
        var country_symbol = document.getElementById('country_symbol').innerText;
        var country_period = encodeURIComponent(document.getElementById("country_period").value);
        var indicator = document.getElementById('indicator_symbol').innerText;
        // var indicator = encodeURIComponent(document.getElementById("indicator").value);
        if (country_symbol === 'Country') {
            alert("Please select country");
            return -1;
        }
        if (country_period === '') {
            alert("Please select period");
            return -1;
        }
        if (indicator === '') {
            alert("Please select indicator");
            return -1;
        }
        var url = "/economics?country=" + country_symbol + "&period=" + country_period + "&indicator=" + indicator
        window.location.href = url;
    }

    function toggleDropdown() {
      var dropdownOptions = document.getElementById('countryDropdown').querySelector('.dropdown-options');
      dropdownOptions.style.display = dropdownOptions.style.display === 'block' ? 'none' : 'block';
    }

    function toggleOption(option) {
      var selectedOptions = document.getElementById('country_symbol');
      if (selectedOptions.innerText === 'Country') {
        selectedOptions.innerText = option;
      } else if (!selectedOptions.innerText.includes(option)) {
        selectedOptions.innerText += ',' + option;
      }
    }

    function toggleIndicatorDropdown() {
      var dropdownOptions = document.getElementById('indicatorDropdown').querySelector('.dropdown-options');
      dropdownOptions.style.display = dropdownOptions.style.display === 'block' ? 'none' : 'block';
    }

    function toggleIndicatorOption(option) {
      var selectedOptions = document.getElementById('indicator_symbol');
      if (selectedOptions.innerText === 'Indicator') {
        selectedOptions.innerText = option;
      } else if (!selectedOptions.innerText.includes(option)) {
        selectedOptions.innerText = option;
      }
    }


    document.addEventListener('click', function(event) {
      var country_dropdown = document.getElementById('countryDropdown');
      var indicator_dropdown = document.getElementById('indicatorDropdown');
      if (!country_dropdown.contains(event.target)) {
        document.getElementById('countryDropdown').querySelector('.dropdown-options').style.display = 'none';
      }
      if (!indicator_dropdown.contains(event.target)) {
        document.getElementById('indicatorDropdown').querySelector('.dropdown-options').style.display = 'none';
      }
    });
</script>
</html>
